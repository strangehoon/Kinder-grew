# ğŸ–í‚¨ë”ê·¸ë£¨
![M1](https://user-images.githubusercontent.com/108935568/232361653-b736e3fa-ff7e-4881-8c40-d72fd7eaac81.png)

## ğŸ“ ê°œìš”

* **í”„ë¡œì íŠ¸ëª…** : í‚¨ë”ê·¸ë£¨

* **ì£¼ì œ** : ìœ ì¹˜ì›ì´ ì•„ì´ì˜ êµìœ¡ì— ë³´ë‹¤ ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ì•„ì´ ê´€ë¦¬ë¥¼ ì§€ì›í•˜ëŠ” í†µí•© ê´€ë¦¬ ì„œë¹„ìŠ¤


* **ê¸°ê°„** : 2023ë…„ 3ì›” 10ì¼ ~ 2023ë…„ 4ì›” 21ì¼

* **í”„ë¡ íŠ¸ì—”ë“œ ê¹ƒí—ˆë¸Œ** : [í‚¨ë”ê·¸ë£¨ FrontEnd](https://github.com/HangHae-12/Front)
* **íŒ€ ë…¸ì…˜** : [íŒ€ ë…¸ì…˜ ë°”ë¡œê°€ê¸°](https://www.notion.so/f4e7bbe6c3cb40689064a4c566b91144https://www.notion.so/f4e7bbe6c3cb40689064a4c566b91144)

* **íŒ€ì›**
 
    | ì´ë¦„ | FE/BE | Github|
    | :------:| :-----:| :---|
    | ë°±ì£¼ì› | FE | https://github.com/baekjoowon |
    | í™©ì¬ì—° | FE | https://github.com/yeonso08 |
    | ìš°ì£¼í˜¸ | FE | https://github.com/Cupcakes33 |
    | í™ì˜ˆì„ | BE | https://github.com/yshong1998 |
    | ì´ìƒí›ˆ | BE | https://github.com/strangehoon |
    | ê¹€ê·¼í˜¸ | BE | https://github.com/GEUNHOKIM |
    | ê¹€í˜„í˜¸ | BE | https://github.com/cho-coding |
  
</br>

## ğŸ•¸ ì•„í‚¤í…ì³

<img src = "https://user-images.githubusercontent.com/117654450/234284146-d7c93c77-29a2-4e14-9b31-f54aeef08481.png" height = "520px" width = "920px" allign = "left">

</br>

</br>

## âš’ ê¸°ìˆ ìŠ¤íƒ


<img src="https://img.shields.io/badge/SpringBoot-6DB33F?style=flat&logo=SpringBoot&logoColor=white"/> <img src="https://img.shields.io/badge/Spring Data Jpa-E31E52?style=flat&logo=Spring Data Jpa&logoColor=white"/>
<img src="https://img.shields.io/badge/Querydsl-0096D6?style=flat&logo=Querydsl&logoColor=white"/> <img src="https://img.shields.io/badge/Spring Security-6DB33F?style=flat&logo=Spring Security&logoColor=white"/>
<img src="https://img.shields.io/badge/Redis-DC382D?style=flat&logo=Redis&logoColor=white"/>
<img src="https://img.shields.io/badge/MySql-4479A1?style=flat&logo=MySql&logoColor=white"/>
<img src="https://img.shields.io/badge/Gradle-02303A?style=flat&logo=Gradle&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon S3-569A31?style=flat&logo=Amazon S3&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=flat&logo=Amazon EC2&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon RDS-527FFF?style=flat&logo=Amazon RDS&logoColor=white"/>
<img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=flat&logo=GitHub Actions&logoColor=white"/>
<img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=GitHub&logoColor=white"/>
<img src="https://img.shields.io/badge/NGINX-009639?style=flat&logo=NGNIX&logoColor=white"/>
<img src="https://img.shields.io/badge/Kakao Login-FFCD00?style=flat&logo=Kakao Login&logoColor=white"/>

</br>

## ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥
<details>
<summary>ì ‘ê¸°/í¼ì¹˜ê¸°</summary> </br>

* **1. ê°„í¸í•œ ì†Œì…œ ë¡œê·¸ì¸**

    <img src = "https://user-images.githubusercontent.com/117654450/234538360-395de2cd-afde-4694-b909-0fabd5f39fe2.png" height = "320px" width = "470px">
    <img src = "https://user-images.githubusercontent.com/117654450/235284914-8945089a-5643-40f3-a06f-40d68dbeff14.png" height = "320px" width = "470px"></br>


</br>

* **2. ë“±í•˜ì› ê´€ë¦¬ ì„œë¹„ìŠ¤**
  * ì‹¤ì‹œê°„ ë“± í•˜ì› ì²˜ë¦¬
      
      <img src = "https://user-images.githubusercontent.com/117654450/234483406-32480928-252e-40bf-9e30-ba7aae550a58.png" height = "420px" width = "820px" allign = "left"> </br> 
  
  * ì‹¤ì‹œê°„ ì•Œë¦¼ ê¸°ëŠ¥(í•™ë¶€ëª¨ ë“±,í•˜ì› ì¹´í†¡ ì „ì†¡)
      
      <img src = "https://user-images.githubusercontent.com/117654450/234485164-55a3bfbd-07b6-4648-8e67-67708bf4bd6a.png" height = "370px" width = "260px">
  </br>
  
* **3. ì¶œê²° ê´€ë¦¬ ì„œë¹„ìŠ¤**
  * ì›”ë³„ ì¶œì„ë¶€(+ ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥)
      
      <img src = "https://user-images.githubusercontent.com/117654450/234496232-5cc71f84-11ab-4cf9-a0d1-228c82a7bfdd.png" height = "420px" width = "820px" allign = "left"></br>
 
  * ì¼ë³„ ì¶œì„ë¶€(+ ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥)
      
      <img src = "https://user-images.githubusercontent.com/117654450/234496601-2e95a9a9-14e8-49d7-a1ad-41dbe0d74961.png" height = "420px" width = "820px" allign = "left"></br>
  
  * ê²°ì„ ì‹ ì²­ ë° ì·¨ì†Œ
       
      <img src = "https://user-images.githubusercontent.com/117654450/234487420-9492853d-fe34-4d4c-aba9-d7665709fef2.png" height = "420px" width = "820px" allign = "left">
</br>
  
* **4. ìœ ì¹˜ì› ìš´ì˜ê´€ë¦¬ ì„œë¹„ìŠ¤**
  * ë°˜ ë³„ ê°¤ëŸ¬ë¦¬
  
      <img src = "https://user-images.githubusercontent.com/117654450/234488736-479d07fc-b259-4d1c-a7a8-eb84a61ee138.png" height = "420px" width = "820px" allign = "left"></br>
      <img src="https://user-images.githubusercontent.com/117654450/234500749-a0a09263-3985-4839-b843-f08a9a660134.png" height="370px" width="260px" style="margin-right: 120px;"/></br>

  * ì•„ì´ ì •ë³´ ì—´ëŒ
      
      <img src = "https://user-images.githubusercontent.com/117654450/234489012-69b8e02f-4d70-4be0-9bad-f868d3305490.png" height = "420px" width = "820px" allign = "left">  
      <img src = "https://user-images.githubusercontent.com/117654450/234502045-2190f05b-2e8e-4615-a0f9-ef5c8a3752f9.png" height = "370px" width = "260px" allign = "left">

</details>

</br>

## ğŸ“ API ëª…ì„¸

[í‚¨ë”ê·¸ë£¨ íŒ€ ë…¸ì…˜ ë°”ë¡œê°€ê¸°](https://www.notion.so/f4e7bbe6c3cb40689064a4c566b91144)

</br>

## ğŸ“Š ERD

<img src = "https://user-images.githubusercontent.com/106438992/235306217-5bf8b84b-f0c2-4235-9827-557dd182c917.png" allign = "left"> 


## ğŸ¤ í˜‘ì—…ë°©ì‹

### TEAM RULE
- ì „ì²´íšŒì˜ì‹œê°„: ì €ë… 8ì‹œ
- BE íšŒì˜ì‹œê°„: ì €ë… 5ì‹œ 30ë¶„
   - ì½”ë“œë¦¬ë·°
   - ì´ìŠˆ ê³µìœ í•˜ê¸°
   - ì§„í–‰ ìƒí™© ê³µìœ í•˜ê¸° 
- ì ì–´ë„ íšŒì˜ ì‹œê°„ì—ëŠ” ë¹„ë””ì˜¤ì™€ ìŒì„± í‚¤ê¸°
- ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ ì»¤ë°‹í•˜ê¸°
- pr í…œí”Œë¦¿ ì–‘ì‹ ì¤€ìˆ˜í•˜ê¸°
- Issue í…œí”Œë¦¿ ì–‘ì‹ ì¤€ìˆ˜í•˜ê¸°
- ë¨¸ì§€í•˜ê³  ë‚˜ì„œ ë¸Œëœì¹˜ ê¼­ ì§€ìš°ê¸°
- í’€ ë‹¹ê¸°ê¸° ì „ì— íŒ¨ì¹˜í•˜ê¸°
- [í”„ë¡œê·¸ë˜ë° ì»¨ë²¤ì…˜ ì¤€ìˆ˜í•˜ê¸°](https://www.notion.so/f4e7bbe6c3cb40689064a4c566b91144)


</br>

## âš–ï¸ ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •

</br>

| ê¸°ìˆ  | ì„ íƒì§€ | ì´ìœ  |
| :------: | :--- | :--- |
| Redis    | 1. DB ì €ì¥<br>2. Redis | ìœ ì¹˜ì›ì´ë¼ëŠ” íŠ¹ì„±ìƒ, ì„ ìƒë‹˜ì´ ì ‘ì†ì„ ì˜¤ë˜ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— Refresh Tokenì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°ì´ ë“¤ì—ˆë‹¤. <br> Refresh Tokenì„ DBì— ì €ì¥ í•´ì„œ ì‚¬ìš©ì„ í•´ë„ ë˜ì§€ë§Œ, ê·¸ë ‡ê²Œ ë˜ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ë§Œë£Œ ëœ Refresh Tokenì„ ì‚­ì œ í•´ì¤˜ì•¼ í•˜ê¸°ë„ í•˜ê³  , ìºì‹œì¸ Redisê°€ ë” ê°€ë³ê³  ì†ë„ë„ ë¹ ë¥´ê³  TTLì„ í†µí•´ì„œ ìë™ìœ¼ë¡œ ì‚­ì œë„ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— Redisë¥¼ ì ìš© í•´ë³´ê¸°ë¡œ í–ˆë‹¤.|
| ImageIO | 1. Marvin open source Library 2. Graphics2D 3. ImageIO | ì²˜ìŒì—ëŠ” ì´ë¯¸ì§€ë¥¼ S3ì— ì—…ë¡œë“œë§Œ í–ˆê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ì´ë¯¸ì§€ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šì•˜ì§€ë§Œ, ì´ë¯¸ì§€ë¥¼ ë¦¬ì‚¬ì´ì§•í•´ì•¼ í•  í•„ìš”ì„±ì´ ìƒê¸°ë©´ì„œ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• ë°©ë²•ì„ ê³ ë¯¼í•´ì•¼ í–ˆë‹¤. ê°€ì¥ ë¨¼ì € Marvin open source Libraryë¥¼ ì‚¬ìš©í•´ ë¦¬ì‚¬ì´ì§•í–ˆì§€ë§Œ ì´ë¯¸ì§€ê°€ ì‹¬í•´ê²Œ ë„íŠ¸í™”ë˜ëŠ” ë¬¸ì œì™€ í”„ë¡œì íŠ¸ ì „ì²´ ìš©ëŸ‰ë³´ë‹¤ marvin ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ìš©ëŸ‰ì´ ì•½ 3ë°° ë” ì»¸ìœ¼ë©°, ì²˜ë¦¬ ì„±ëŠ¥ ì €í•˜ ë¬¸ì œë„ ìˆì—ˆë‹¤. ë”°ë¼ì„œ java.awt íŒ¨í‚¤ì§€ì˜ Graphics2D í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ ì‚¬ìš© ì—†ì´ êµ¬í˜„ì„ í•´ ë³´ì•˜ì§€ë§Œ ì„±ëŠ¥ì€ ê°œì„ ë˜ì—ˆì§€ë§Œ ë„íŠ¸í™”ê°€ ë”ìš± ì‹¬ê°í•´ì§€ëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤. ë”°ë¼ì„œ Graphics2D ëŒ€ì‹  ImageIOí´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ë¦¬ì‚¬ì´ì§•í•˜ëŠ” ë°©ë²•ì„ ì±„íƒí–ˆë‹¤. ë„íŠ¸í™”ê°€ ì•„ì˜ˆ ì—†ëŠ” ê²ƒì€ ì•„ë‹ˆì—ˆì§€ë§Œ ë‹¤ë¥¸ 2ê°œì˜ ë°©ë²•ì— ë¹„í•´ ì •ë„ê°€ ë‚®ì•˜ìœ¼ë©° ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ë„ í•„ìš”ì—†ì—ˆê³ , ì„±ëŠ¥ë„ Graphics2Dì™€ í° ì°¨ì´ë¥¼ ë³´ì´ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤. |
| ì¹´ì¹´ì˜¤ ì•Œë¦¼ ê¸°ëŠ¥ | 1. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì•Œë¦¼ êµ¬í˜„ </br> 2. ë°±ì—”ë“œì—ì„œ ì•Œë¦¼ êµ¬í˜„ | í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ ëª¨ë‘ ì¹´ì¹´ì˜¤ ì•Œë¦¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬í•˜ê¸°ë¡œ í–ˆë‹¤. </br> 1. íŠ¸ëœì­ì…˜ </br> ë‹¨ìˆœ ì¹´ì¹´ì˜¤ ì•Œë¦¼ ê¸°ëŠ¥ ë¿ë§Œ ì•„ë‹ˆë¼ ì•„ì´ì˜ ë“±í•˜ì› ìƒíƒœë„ ë°”ë€Œì–´ì•¼ í•˜ë¯€ë¡œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬ ì‹œ ì¹´ì¹´ì˜¤ ì•Œë¦¼ ë©”ì‹œì§€ API ë¿ë§Œ ì•„ë‹ˆë¼ ë“±í•˜ì› ìƒíƒœ ë³€ê²½ APIë„ í•„ìš”í–ˆë‹¤. í•˜ì§€ë§Œ ì„œë²„ì—ì„œëŠ” API í•˜ë‚˜ë¡œ ê°™ì€ íŠ¸ëœì­ì…˜ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ì´ë¡œì¸í•´ ì¹´ì¹´ì˜¤ ì•Œë¦¼ ê¸°ëŠ¥ê³¼ ë“±í•˜ì› ìƒíƒœ ë³€ê²½ì„ ë¬¶ì–´ì„œ ì¼ê´€ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆì—ˆë‹¤. </br> 2. ë³´ì•ˆ</br> ì¹´ì¹´ì˜¤ ë©”ì‹œì§€ APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ë³´ì•ˆìƒ ì¤‘ìš”í•œ kakaoIdì™€ AccessTokenì´ í•„ìš”í•˜ë‹¤. ì´ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬í•˜ë©´, ì´ ì •ë³´ê°€ ë¸Œë¼ìš°ì €ì—ì„œ ë…¸ì¶œë˜ê±°ë‚˜ íƒˆì·¨ë  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬í•˜ë©´, ì•ˆì „í•œ í™˜ê²½ì—ì„œ ì´ ì •ë³´ë“¤ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.|
| ë³µì¡í•œ ë™ì  ì¿¼ë¦¬ ì‘ì„± | 1. JPA ì¿¼ë¦¬ ë©”ì„œë“œ </br> 2. @Query </br> 3. QueryDSL | ê¸°ì¡´ì˜ JPA ì¿¼ë¦¬ ë©”ì„œë“œëŠ” ë™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ”ë° í•œê³„ê°€ ìˆì—ˆë‹¤. ê·¸ë˜ì„œ ìŠ¤í”„ë§ ë°ì´í„° JPAì˜ @Queryë¥¼ ì‚¬ìš©í•˜ë ¤ í–ˆë‹¤. @Queryë„ ë™ì  ì¿¼ë¦¬ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ì¢‹ì€ ëŒ€ì•ˆì´ë¼ê³  ìƒê°í–ˆìœ¼ë‚˜ ê·¸ë˜ë„ ì£¼ì–´ì§„ ë¬¸ì œì— ì ìš©í•˜ê¸°ì—ëŠ” ê³ ë ¤í•´ì•¼ í•  ì¡°ê±´ì´ ë„ˆë¬´ ë§ë‹¤ê³  ìƒê°í–ˆë‹¤. ë¬´ì—‡ë³´ë‹¤ë„ ê°€ë…ì„±ì´ ë„ˆë¬´ ë–¨ì–´ì ¸ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì–´ë µë‹¤ê³  ìƒê°í–ˆë‹¤. ë°˜ë©´ QueryDSLì˜ where ë‹¤ì¤‘ íŒŒë¼ë¯¸í„° ë°©ì‹ì€ ì£¼ì–´ì§„ ë¬¸ì œì˜ ì¡°ê±´ë“¤ì„ ë™ì ìœ¼ë¡œ ì»¤ìŠ¤íŠ¬í•  ìˆ˜ ìˆì„ ê±°ë¼ ìƒê°í–ˆë‹¤. ì´ ì™¸ì—ë„ ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ì¡ì„ ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ @Queryë³´ë‹¤ ì¿¼ë¦¬ ìì²´ì˜ ê°€ë…ì„±ì´ í›¨ì”¬ ì¢‹ë‹¤ëŠ” ì ë„ QueryDSLì„ ë„ì…í•œ ì´ìœ ì˜€ë‹¤.



</br>

## ğŸ”¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…


- [íšŒì› ê°€ì… ì‹œ, ë‹¨ì¼ í…Œì´ë¸” ì „ëµê³¼ ë§ì§€ ì•ŠëŠ” ë¬¸ì œ](https://github.com/HangHae-12/back/wiki/%ED%9A%8C%EC%9B%90-%EA%B0%80%EC%9E%85-%EC%8B%9C,-%EB%8B%A8%EC%9D%BC-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%A0%84%EB%9E%B5%EA%B3%BC-%EB%A7%9E%EC%A7%80-%EC%95%8A%EB%8A%94-%EB%AC%B8%EC%A0%9C)
- [ë¯¸ì„¸ë¨¼ì§€API Dtoì— ê¸°ë³¸ìƒì„±ìë¥¼ ì¶”ê°€í•´ë„ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ëŠ” ì˜¤ë¥˜](https://github.com/HangHae-12/back/wiki/%EB%AF%B8%EC%84%B8%EB%A8%BC%EC%A7%80API-Dto%EC%97%90-%EA%B8%B0%EB%B3%B8%EC%83%9D%EC%84%B1%EC%9E%90%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%B4%EB%8F%84-%EC%A1%B4%EC%9E%AC%ED%95%98%EC%A7%80-%EC%95%8A%EB%8B%A4%EB%8A%94-%EC%98%A4%EB%A5%98)



</br>

## ğŸ›  í”„ë¡œì íŠ¸ í›„ í˜¼ìì„œ ì§„í–‰í•œ ë¦¬íŒ©í† ë§

ë‹¤ìŒì€ í”„ë¡œì íŠ¸ê°€ ëë‚˜ê³  ì œê°€ í˜¼ìì„œ ì§„í–‰í•œ ë‚´ìš©ë“¤ì…ë‹ˆë‹¤. 
 
### 1. QueryDSL ì„±ëŠ¥ ê°œì„ 
>ğŸ’¡ ìì„¸í•œ ë‚´ìš©ì€ [QueryDSLì„ ì´ìš©í•œ ë™ì  ì¿¼ë¦¬ ìƒì„± ë° ì„±ëŠ¥ ê°œì„ ](https://velog.io/@strangehoon/QueryDSL#%EC%88%98%EC%A0%95%ED%95%9C-querydsl-%EC%BD%94%EB%93%9C) ì°¸ê³  ë°”ëë‹ˆë‹¤.

ì´ì „ì— ì‘ì„±í•œ ì½”ë“œì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬í•­ë“¤ì„ ê³ ë ¤í•˜ì—¬ ë¦¬íŒ©í† ë§í–ˆìŠµë‹ˆë‹¤. 

**First** : ë¶ˆí•„ìš”í•œ cross joinê³¼ distinct ë©”ì„œë“œ ì œê±° </br>
**Second** : whereì ˆ ì¤‘ë³µ ì¡°ê±´ ì œê±° </br>
**Third** : attendance í…Œì´ë¸”ì˜ date ì»¬ëŸ¼ ì¸ë±ìŠ¤ ì ìš© </br>
**Fourth** : PageableExecutionUtilsë¥¼ í†µí•œ count ì¿¼ë¦¬ ìµœì í™” </br>

**ìˆ˜ì •í•œ QueryDSL ì½”ë“œ**
```java
@RequiredArgsConstructor
@Repository
public class ChildRepositoryImpl implements ChildRepositoryCustom{

    private final JPAQueryFactory queryFactory;

    @Override
    public Page<ChildScheduleResponseDto> findChildSchedule(Long classroomId, Long kindergartenId, CommuteStatus commuteStatus, String time, Pageable pageable,
                                                                              InfoDto info, List<ClassroomInfoDto> everyClass){
        List<ChildScheduleResponseDto> result = queryFactory
                .select(new QChildScheduleResponseDto(
                        child.id,
                        child.name,
                        child.profileImageUrl,
                        attendance.enterTime,
                        attendance.exitTime,
                        attendance.status
                ))
                .from(attendance)
                .join(attendance.child, child)
                .join(child.classroom, classroom)
                .join(classroom.kindergarten, kindergarten)
                .where(classroomIdAndKindergartenIdIs(classroomId, kindergartenId), stateIs(commuteStatus),
                        timeIs(commuteStatus, time))
                .orderBy(child.name.asc())
                .offset(pageable.getOffset())
                .limit(pageable.getPageSize())
                .fetch();

        JPAQuery<Attendance> total = queryFactory
                .select(attendance)
                .from(attendance)
                .join(attendance.child, child)
                .join(child.classroom, classroom)
                .join(classroom.kindergarten, kindergarten)
                .where(classroomIdAndKindergartenIdIs(classroomId, kindergartenId), stateIs(commuteStatus),
                        timeIs(commuteStatus, time));

        return PageableExecutionUtils.getPage(result, pageable, total::fetchCount);
    }

    private BooleanExpression classroomIdAndKindergartenIdIs(Long classroomId, Long kindergartenId) {
        return classroomId != null ? child.classroom.id.eq(classroomId).and(classroom.kindergarten.id.eq(kindergartenId)) : classroom.kindergarten.id.eq(kindergartenId);
    }

    private BooleanExpression stateIs(CommuteStatus commuteStatus){
        if(commuteStatus.equals(ENTER)){
            return attendance.exitTime.isNull().and(attendance.date.eq(LocalDate.now())).and(attendance.status.ne(ê²°ì„));
        }
        else if(commuteStatus.equals(EXIT)) {
            return attendance.enterTime.isNotNull().and(attendance.date.eq(LocalDate.now())).and(attendance.status.ne(ê²°ì„));
        }
        else
            return null;
    }

    private BooleanExpression timeIs(CommuteStatus commuteStatus, String time) {
        if(commuteStatus.equals(ENTER)){
            return time != null ? child.dailyEnterTime.eq(time) : null;
        }
        else
            return time != null ? child.dailyExitTime.eq(time) : null;
    }
}
```


 
 

